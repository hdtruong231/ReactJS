(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const l of d)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(d){const l={};return d.integrity&&(l.integrity=d.integrity),d.referrerPolicy&&(l.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?l.credentials="include":d.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(d){if(d.ep)return;d.ep=!0;const l=e(d);fetch(d.href,l)}})();const o=document.getElementById("formAdd"),f=document.getElementById("addStudent"),c=document.getElementById("submit"),u=document.getElementById("textHeading");let i=!1,s=[];function m(){let r=document.getElementById("listStudent"),t="";s.forEach(function(e){t+='<tr><td class="border border-gray-300 px-4 py-2">'+e.name+'</td><td class="border border-gray-300 px-4 py-2">'+e.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+e.email+'</td><td class="border border-gray-300 px-4 py-2">'+e.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Sửa</button></td><td class="border border-gray-300 px-4 py-2"><button class="delStudent  bg-red-500 hover:bg-red-700 active:bg-red-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Xóa</button></td></tr>`}),r.innerHTML=t}f.addEventListener("click",function(){const r=document.getElementById("themsv");r.style.display="flex",c.textContent="Thêm",u.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(r){if(r.target.classList.contains("delStudent"))if(confirm("Bạn có chắc chắn muốn xóa sinh viên này không?")){const t=r.target.dataset.mssv;s=s.filter(e=>e.MSSV!==t),m()}else return;else if(r.target.classList.contains("editStudent")){const t=r.target.dataset.mssv,e=s.find(n=>n.MSSV===t);if(e){const n=document.getElementById("themsv");n.style.display="flex",c.textContent="Cập nhật",u.textContent="Cập nhật Thông tin",document.getElementById("name").value=e.name,document.getElementById("MSSV").value=e.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=e.email,document.getElementById("department").value=e.department.value,document.getElementById("gender").value=e.gender.value,document.getElementById("birthdate").value=e.birthdate,i=!0}}});o.addEventListener("submit",function(r){let t={};if(r.preventDefault(),t={name:o.name.value,MSSV:o.MSSV.value,email:o.email.value,department:{value:o.department.value,text:o.department.options[o.department.selectedIndex].text},gender:{value:o.gender.value,text:o.gender.options[o.gender.selectedIndex].text},birthdate:o.birthdate.value},i===!1){for(let n=0;n<s.length;n++)if(s[n].MSSV===t.MSSV){alert("MSSV đã tồn tại");return}s.push(t)}else for(let n=0;n<s.length;n++)s[n].MSSV===t.MSSV&&(s[n]=t,i=!1);m(),o.reset();const e=document.getElementById("themsv");e.style.display="none",console.log(t)});const y=document.getElementById("closeModal");y.addEventListener("click",function(){const r=document.getElementById("themsv");r.style.display="none",o.reset()});
