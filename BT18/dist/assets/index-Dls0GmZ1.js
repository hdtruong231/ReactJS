(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const s=document.getElementById("formAdd"),p=document.getElementById("addStudent"),f=document.getElementById("submit"),v=document.getElementById("textHeading");let y=!1,d=[];const i=6;let a=1;const h=document.getElementById("listPage"),x=document.getElementById("pages");function g(){a===1?(document.getElementById("prev").setAttribute("disabled",!0),document.getElementById("prev").classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("prev").classList.add("bg-gray-300","text-black")):(document.getElementById("prev").removeAttribute("disabled"),document.getElementById("prev").classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("prev").classList.remove("bg-gray-300","text-black")),a===Math.ceil(d.length/i)?(document.getElementById("next").setAttribute("disabled",!0),document.getElementById("next").classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("next").classList.add("bg-gray-300","text-black")):(document.getElementById("next").removeAttribute("disabled"),document.getElementById("next").classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("next").classList.remove("bg-gray-300","text-black"))}document.getElementById("prev").addEventListener("click",function(){a>1&&(a--,u(d,a),document.querySelectorAll(".page").forEach(function(e){e.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),e.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),document.querySelector(`.page[data-page="${a}"]`).classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.querySelector(`.page[data-page="${a}"]`).classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});document.getElementById("next").addEventListener("click",function(){a<Math.ceil(d.length/i)&&(a++,u(d,a),document.querySelectorAll(".page").forEach(function(e){e.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),e.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),document.querySelector(`.page[data-page="${a}"]`).classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.querySelector(`.page[data-page="${a}"]`).classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});x.addEventListener("click",function(e){e.target.classList.contains("page")&&(a=parseInt(e.target.dataset.page),u(d,a),document.querySelectorAll(".page").forEach(function(l){l.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),l.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),e.target.classList.add("bg-blue-500","text-white","hover:bg-blue-700"),e.target.classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});function E(e,l,r){const n=(r-1)*l,t=n+l;return e.slice(n,t)}function b(e,l){const r=Math.ceil(e.length/l);let n="";for(let t=1;t<=r;t++)n+=`<button class="page ${t===1?"bg-blue-500 hover:bg-blue-700 text-white font-bold text-white":"bg-gray-300 hover:bg-gray-500 text-black"}  font-bold py-2 px-4 rounded" data-page="${t}">${t}</button>`;h.innerHTML=n}function u(e,l=1){let r=document.getElementById("listStudent"),n="";E(e,i,l).forEach(function(o){n+='<tr><td class="border border-gray-300 px-4 py-2">'+o.name+'</td><td class="border border-gray-300 px-4 py-2">'+o.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+o.email+'</td><td class="border border-gray-300 px-4 py-2">'+o.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+o.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+o.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${o.MSSV}">Sửa</button></td><td class="border border-gray-300 px-4 py-2"><button class="delStudent  bg-red-500 hover:bg-red-700 active:bg-red-900 text-white font-bold py-2 px-4 rounded" data-mssv="${o.MSSV}">Xóa</button></td></tr>`}),r.innerHTML=n}p.addEventListener("click",function(){const e=document.getElementById("themsv");e.style.display="flex",f.textContent="Thêm",v.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(e){if(e.target.classList.contains("delStudent"))if(confirm("Bạn có chắc chắn muốn xóa sinh viên này không?")){const l=e.target.dataset.mssv;d=d.filter(r=>r.MSSV!==l),u(d),b(d,i),g()}else return;else if(e.target.classList.contains("editStudent")){const l=e.target.dataset.mssv,r=d.find(n=>n.MSSV===l);if(r){const n=document.getElementById("themsv");n.style.display="flex",f.textContent="Cập nhật",v.textContent="Cập nhật Thông tin",document.getElementById("name").value=r.name,document.getElementById("MSSV").value=r.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=r.email,document.getElementById("department").value=r.department.value,document.getElementById("gender").value=r.gender.value,document.getElementById("birthdate").value=r.birthdate,y=!0}}});s.addEventListener("submit",function(e){let l={};if(e.preventDefault(),l={name:s.name.value.trim(),MSSV:s.MSSV.value.trim(),email:s.email.value.trim(),department:{value:s.department.value,text:s.department.options[s.department.selectedIndex].text},gender:{value:s.gender.value,text:s.gender.options[s.gender.selectedIndex].text},birthdate:s.birthdate.value},y===!1){for(let n=0;n<d.length;n++)if(d[n].MSSV===l.MSSV){alert("MSSV đã tồn tại");return}d.push(l)}else for(let n=0;n<d.length;n++)d[n].MSSV===l.MSSV&&(d[n]=l,y=!1);u(d),b(d,i),g(),s.reset();const r=document.getElementById("themsv");r.style.display="none",console.log(l)});const S=document.getElementById("search"),I=document.getElementById("searchBtn");I.addEventListener("click",function(){const e=S.value;if(e==="")u(d),b(d,i);else{const l=d.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));let r=document.getElementById("listStudent"),n="";u(l),b(l,i),g(),l.length===0&&(n='<tr><td class="border border-gray-300 px-4 py-2" colspan="8">Không tìm thấy sinh viên</td></tr>'),r.innerHTML=n}});function B(){let e=new Date().getFullYear(),l=document.getElementById("yearFilter");for(let r=e;r>=1980;r--){let n=document.createElement("option");n.value=r,n.text=r,l.appendChild(n)}}B();const L=document.getElementById("closeModal");L.addEventListener("click",function(){const e=document.getElementById("themsv");e.style.display="none",s.reset()});const M=document.getElementById("closefil");M.addEventListener("click",function(){const e=document.getElementById("locsv");e.style.display="none",s.reset()});const V=document.getElementById("filStudent");V.addEventListener("click",function(){const e=document.getElementById("locsv");e.style.display="flex"});const m=document.getElementById("formFilter");m.addEventListener("submit",function(e){e.preventDefault();const l=m.yearFilter.value,r=m.gFilter.value,n=m.dFilter.value;let t=d;l!==""&&(t=t.filter(c=>c.birthdate.includes(l))),r!==""&&(t=t.filter(c=>c.gender.value===r)),n!==""&&(t=t.filter(c=>c.department.value===n)),u(t),b(t,i),g();const o=document.getElementById("locsv");o.style.display="none"});m.addEventListener("reset",function(){u(d),b(d,i),g(),m.reset();const e=document.getElementById("locsv");e.style.display="none"});
