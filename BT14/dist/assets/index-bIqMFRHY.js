(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();const d=document.getElementById("formAdd"),m=document.getElementById("addStudent"),u=document.getElementById("submit"),c=document.getElementById("textHeading");let i=!1,a=[];function f(){let l=document.getElementById("listStudent"),t="";a.forEach(function(e){t+='<tr><td class="border border-gray-300 px-4 py-2">'+e.name+'</td><td class="border border-gray-300 px-4 py-2">'+e.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+e.email+'</td><td class="border border-gray-300 px-4 py-2">'+e.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Sửa</button></td></tr>`}),l.innerHTML=t}m.addEventListener("click",function(){const l=document.getElementById("themsv");l.style.display="flex",u.textContent="Thêm",c.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(l){if(l.target.classList.contains("editStudent")){const t=l.target.dataset.mssv,e=a.find(n=>n.MSSV===t);if(e){const n=document.getElementById("themsv");n.style.display="flex",u.textContent="Cập nhật",c.textContent="Cập nhật Thông tin",document.getElementById("name").value=e.name,document.getElementById("MSSV").value=e.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=e.email,document.getElementById("department").value=e.department.value,document.getElementById("gender").value=e.gender.value,document.getElementById("birthdate").value=e.birthdate,i=!0}}});d.addEventListener("submit",function(l){let t={};if(l.preventDefault(),t={name:d.name.value,MSSV:d.MSSV.value,email:d.email.value,department:{value:d.department.value,text:d.department.options[d.department.selectedIndex].text},gender:{value:d.gender.value,text:d.gender.options[d.gender.selectedIndex].text},birthdate:d.birthdate.value},i===!1){for(let n=0;n<a.length;n++)if(a[n].MSSV===t.MSSV){alert("MSSV đã tồn tại");return}a.push(t)}else for(let n=0;n<a.length;n++)a[n].MSSV===t.MSSV&&(a[n]=t,i=!1);f(),d.reset();const e=document.getElementById("themsv");e.style.display="none",console.log(t)});
