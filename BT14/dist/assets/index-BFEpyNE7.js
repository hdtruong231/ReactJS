(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const l of d)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(d){const l={};return d.integrity&&(l.integrity=d.integrity),d.referrerPolicy&&(l.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?l.credentials="include":d.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(d){if(d.ep)return;d.ep=!0;const l=e(d);fetch(d.href,l)}})();const r=document.getElementById("formAdd"),m=document.getElementById("addStudent"),c=document.getElementById("submit"),u=document.getElementById("textHeading");let i=!1,s=[];function y(){let o=document.getElementById("listStudent"),t="";s.forEach(function(e){t+='<tr><td class="border border-gray-300 px-4 py-2">'+e.name+'</td><td class="border border-gray-300 px-4 py-2">'+e.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+e.email+'</td><td class="border border-gray-300 px-4 py-2">'+e.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Sửa</button></td></tr>`}),o.innerHTML=t}m.addEventListener("click",function(){const o=document.getElementById("themsv");o.style.display="flex",c.textContent="Thêm",u.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(o){if(o.target.classList.contains("editStudent")){const t=o.target.dataset.mssv,e=s.find(n=>n.MSSV===t);if(e){const n=document.getElementById("themsv");n.style.display="flex",c.textContent="Cập nhật",u.textContent="Cập nhật Thông tin",document.getElementById("name").value=e.name,document.getElementById("MSSV").value=e.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=e.email,document.getElementById("department").value=e.department.value,document.getElementById("gender").value=e.gender.value,document.getElementById("birthdate").value=e.birthdate,i=!0}}});r.addEventListener("submit",function(o){let t={};if(o.preventDefault(),t={name:r.name.value,MSSV:r.MSSV.value,email:r.email.value,department:{value:r.department.value,text:r.department.options[r.department.selectedIndex].text},gender:{value:r.gender.value,text:r.gender.options[r.gender.selectedIndex].text},birthdate:r.birthdate.value},i===!1){for(let n=0;n<s.length;n++)if(s[n].MSSV===t.MSSV){alert("MSSV đã tồn tại");return}s.push(t)}else for(let n=0;n<s.length;n++)s[n].MSSV===t.MSSV&&(s[n]=t,i=!1);y(),r.reset();const e=document.getElementById("themsv");e.style.display="none",console.log(t)});const f=document.getElementById("closeModal");f.addEventListener("click",function(){const o=document.getElementById("themsv");o.style.display="none",r.reset()});
