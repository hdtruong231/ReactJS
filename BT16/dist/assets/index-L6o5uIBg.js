(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}})();const o=document.getElementById("formAdd"),b=document.getElementById("addStudent"),u=document.getElementById("submit"),m=document.getElementById("textHeading");let c=!1,l=[];function i(){let n=document.getElementById("listStudent"),d="";l.forEach(function(t){d+='<tr><td class="border border-gray-300 px-4 py-2">'+t.name+'</td><td class="border border-gray-300 px-4 py-2">'+t.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+t.email+'</td><td class="border border-gray-300 px-4 py-2">'+t.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+t.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+t.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${t.MSSV}">Sửa</button></td><td class="border border-gray-300 px-4 py-2"><button class="delStudent  bg-red-500 hover:bg-red-700 active:bg-red-900 text-white font-bold py-2 px-4 rounded" data-mssv="${t.MSSV}">Xóa</button></td></tr>`}),n.innerHTML=d}b.addEventListener("click",function(){const n=document.getElementById("themsv");n.style.display="flex",u.textContent="Thêm",m.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(n){if(n.target.classList.contains("delStudent"))if(confirm("Bạn có chắc chắn muốn xóa sinh viên này không?")){const d=n.target.dataset.mssv;l=l.filter(t=>t.MSSV!==d),i()}else return;else if(n.target.classList.contains("editStudent")){const d=n.target.dataset.mssv,t=l.find(r=>r.MSSV===d);if(t){const r=document.getElementById("themsv");r.style.display="flex",u.textContent="Cập nhật",m.textContent="Cập nhật Thông tin",document.getElementById("name").value=t.name,document.getElementById("MSSV").value=t.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=t.email,document.getElementById("department").value=t.department.value,document.getElementById("gender").value=t.gender.value,document.getElementById("birthdate").value=t.birthdate,c=!0}}});o.addEventListener("submit",function(n){let d={};if(n.preventDefault(),d={name:o.name.value,MSSV:o.MSSV.value,email:o.email.value,department:{value:o.department.value,text:o.department.options[o.department.selectedIndex].text},gender:{value:o.gender.value,text:o.gender.options[o.gender.selectedIndex].text},birthdate:o.birthdate.value},c===!1){for(let r=0;r<l.length;r++)if(l[r].MSSV===d.MSSV){alert("MSSV đã tồn tại");return}l.push(d)}else for(let r=0;r<l.length;r++)l[r].MSSV===d.MSSV&&(l[r]=d,c=!1);i(),o.reset();const t=document.getElementById("themsv");t.style.display="none",console.log(d)});const y=document.getElementById("search"),g=document.getElementById("searchBtn");g.addEventListener("click",function(){const n=y.value;if(n==="")i();else{const d=l.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()));let t=document.getElementById("listStudent"),r="";d.forEach(function(e){r+='<tr><td class="border border-gray-300 px-4 py-2">'+e.name+'</td><td class="border border-gray-300 px-4 py-2">'+e.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+e.email+'</td><td class="border border-gray-300 px-4 py-2">'+e.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+e.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Sửa</button></td><td class="border border-gray-300 px-4 py-2"><button class="delStudent  bg-red-500 hover:bg-red-700 active:bg-red-900 text-white font-bold py-2 px-4 rounded" data-mssv="${e.MSSV}">Xóa</button></td></tr>`}),r===""&&(r='<tr><td class="border border-gray-300 px-4 py-2" colspan="8">Không tìm thấy sinh viên</td></tr>'),t.innerHTML=r}});
