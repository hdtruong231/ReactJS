(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const d=document.getElementById("formAdd"),E=document.getElementById("addStudent"),h=document.getElementById("submit"),x=document.getElementById("textHeading");let f=!1,s=[];const i=6;let a=1;const S=document.getElementById("listPage"),I=document.getElementById("pages");function g(){a===1?(document.getElementById("prev").setAttribute("disabled",!0),document.getElementById("prev").classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("prev").classList.add("bg-gray-300","text-black")):(document.getElementById("prev").removeAttribute("disabled"),document.getElementById("prev").classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("prev").classList.remove("bg-gray-300","text-black")),a===Math.ceil(s.length/i)?(document.getElementById("next").setAttribute("disabled",!0),document.getElementById("next").classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("next").classList.add("bg-gray-300","text-black")):(document.getElementById("next").removeAttribute("disabled"),document.getElementById("next").classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.getElementById("next").classList.remove("bg-gray-300","text-black"))}document.getElementById("prev").addEventListener("click",function(){a>1&&(a--,u(s,a),document.querySelectorAll(".page").forEach(function(e){e.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),e.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),document.querySelector(`.page[data-page="${a}"]`).classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.querySelector(`.page[data-page="${a}"]`).classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});document.getElementById("next").addEventListener("click",function(){a<Math.ceil(s.length/i)&&(a++,u(s,a),document.querySelectorAll(".page").forEach(function(e){e.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),e.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),document.querySelector(`.page[data-page="${a}"]`).classList.add("bg-blue-500","text-white","hover:bg-blue-700"),document.querySelector(`.page[data-page="${a}"]`).classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});I.addEventListener("click",function(e){e.target.classList.contains("page")&&(a=parseInt(e.target.dataset.page),u(s,a),document.querySelectorAll(".page").forEach(function(l){l.classList.remove("bg-blue-500","text-white","hover:bg-blue-700"),l.classList.add("bg-gray-300","text-black","hover:bg-gray-500")}),e.target.classList.add("bg-blue-500","text-white","hover:bg-blue-700"),e.target.classList.remove("bg-gray-300","text-black","hover:bg-gray-500"),g())});function B(e,l,r){const n=(r-1)*l,t=n+l;return e.slice(n,t)}function b(e,l){const r=Math.ceil(e.length/l);let n="";for(let t=1;t<=r;t++)n+=`<button class="page ${t===1?"bg-blue-500 hover:bg-blue-70 font-bold text-white":"bg-gray-300 hover:bg-gray-500 text-black"}  font-bold py-2 px-4 rounded" data-page="${t}">${t}</button>`;S.innerHTML=n}function u(e,l=1){let r=document.getElementById("listStudent"),n="";B(e,i,l).forEach(function(o){n+='<tr><td class="border border-gray-300 px-4 py-2">'+o.name+'</td><td class="border border-gray-300 px-4 py-2">'+o.MSSV+'</td><td class="border border-gray-300 px-4 py-2">'+o.email+'</td><td class="border border-gray-300 px-4 py-2">'+o.department.text+'</td><td class="border border-gray-300 px-4 py-2">'+o.gender.text+'</td><td class="border border-gray-300 px-4 py-2">'+o.birthdate+`</td><td class="border border-gray-300 px-4 py-2"><button class="editStudent bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white font-bold py-2 px-4 rounded" data-mssv="${o.MSSV}">Sửa</button></td><td class="border border-gray-300 px-4 py-2"><button class="delStudent  bg-red-500 hover:bg-red-700 active:bg-red-900 text-white font-bold py-2 px-4 rounded" data-mssv="${o.MSSV}">Xóa</button></td></tr>`}),r.innerHTML=n}E.addEventListener("click",function(){const e=document.getElementById("themsv");e.style.display="flex",h.textContent="Thêm",x.textContent="Thêm Sinh Viên",document.getElementById("MSSV").removeAttribute("readonly")});document.addEventListener("click",function(e){if(e.target.classList.contains("delStudent"))if(confirm("Bạn có chắc chắn muốn xóa sinh viên này không?")){const l=e.target.dataset.mssv;s=s.filter(r=>r.MSSV!==l),u(s),b(s,i),g()}else return;else if(e.target.classList.contains("editStudent")){const l=e.target.dataset.mssv,r=s.find(n=>n.MSSV===l);if(r){const n=document.getElementById("themsv");n.style.display="flex",h.textContent="Cập nhật",x.textContent="Cập nhật Thông tin",document.getElementById("name").value=r.name,document.getElementById("MSSV").value=r.MSSV,document.getElementById("MSSV").setAttribute("readonly",!0),document.getElementById("email").value=r.email,document.getElementById("department").value=r.department.value,document.getElementById("gender").value=r.gender.value,document.getElementById("birthdate").value=r.birthdate,f=!0}}});d.addEventListener("submit",function(e){let l={};if(e.preventDefault(),l={name:d.name.value.trim(),MSSV:d.MSSV.value.trim(),email:d.email.value.trim(),department:{value:d.department.value,text:d.department.options[d.department.selectedIndex].text},gender:{value:d.gender.value,text:d.gender.options[d.gender.selectedIndex].text},birthdate:d.birthdate.value},f===!1){for(let n=0;n<s.length;n++)if(s[n].MSSV===l.MSSV){alert("MSSV đã tồn tại");return}s.push(l)}else for(let n=0;n<s.length;n++)s[n].MSSV===l.MSSV&&(s[n]=l,f=!1);u(s),b(s,i),g(),d.reset();const r=document.getElementById("themsv");r.style.display="none",console.log(l)});const L=document.getElementById("search"),M=document.getElementById("searchBtn");M.addEventListener("click",function(){const e=L.value;if(e==="")u(s),b(s,i);else{const l=s.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));let r=document.getElementById("listStudent"),n="";u(l),b(l,i),g(),l.length===0&&(n='<tr><td class="border border-gray-300 px-4 py-2" colspan="8">Không tìm thấy sinh viên</td></tr>'),r.innerHTML=n}});function V(){let e=new Date().getFullYear(),l=document.getElementById("yearFilter");for(let r=e;r>=1980;r--){let n=document.createElement("option");n.value=r,n.text=r,l.appendChild(n)}}V();const A=document.getElementById("closeModal");A.addEventListener("click",function(){const e=document.getElementById("themsv");e.style.display="none",d.reset()});const k=document.getElementById("closefil");k.addEventListener("click",function(){const e=document.getElementById("locsv");e.style.display="none",d.reset()});const w=document.getElementById("filStudent");w.addEventListener("click",function(){const e=document.getElementById("locsv");e.style.display="flex"});const m=document.getElementById("formFilter");m.addEventListener("submit",function(e){e.preventDefault();const l=m.yearFilter.value,r=m.gFilter.value,n=m.dFilter.value;let t=s;l!==""&&(t=t.filter(c=>c.birthdate.includes(l))),r!==""&&(t=t.filter(c=>c.gender.value===r)),n!==""&&(t=t.filter(c=>c.department.value===n)),u(t),b(t,i),g();const o=document.getElementById("locsv");o.style.display="none"});m.addEventListener("reset",function(){u(s),b(s,i),g(),m.reset();const e=document.getElementById("locsv");e.style.display="none"});function C(e,l,r=!0){const n=e.tBodies[0],t=Array.from(n.querySelectorAll("tr"));t.sort((o,c)=>{const v=o.querySelectorAll("td")[l].textContent.trim(),p=c.querySelectorAll("td")[l].textContent.trim();return r?v.localeCompare(p):p.localeCompare(v)}),t.forEach(o=>n.appendChild(o))}const y=document.getElementById("table");y.querySelectorAll(".ths").forEach((e,l)=>{e.addEventListener("click",()=>{y.querySelectorAll(".ths").forEach(t=>{if(t!==e){t.classList.remove("asc");const o=t.querySelector("svg");o.style.display="none"}});const r=e.classList.contains("asc");C(y,l,!r),e.classList.toggle("asc",!r);const n=e.querySelector("svg");n.style.display="block",r?n.style.transform="rotate(180deg)":n.style.transform="rotate(0deg)"})});
